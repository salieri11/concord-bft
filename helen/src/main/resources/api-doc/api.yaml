openapi: 3.0.0
info:
  title: VMware Blockchain API
  description: A Scalable Byzantine Fault Tolerant Ledger
  version: 1.0.0
servers:
  - url: /api
    description: Local API endpoint
tags:
  - name: profiles
    description: User, Organization and Consortium Management
  - name: blockchains
    description: Blockchain Management
  - name: contracts
    description: Contract Management
  - name: ethereum
    description: Ethereum calls
  - name: concord
    description: Calls to Concord
  - name: tasks
    description: Task Management
  - name: deprecated
    description: Deprecated APIs
paths:
  /concord/members:
    summary: Blockchain Consensus Membership List
    get:
      deprecated: true
      tags:
        - deprecated
      summary: List replicas that are members
      operationId: memberListGet
      responses:
        200:
          description: Members
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    hostname:
                      type: string
                    address:
                      type: string
                    status:
                      type: string
                    millis_since_last_message:
                      type: integer
                    millis_since_last_message_threshold:
                      type: integer
                    rpc_url:
                      type: string
                      format: url
  /concord/blocks:
    summary: Blockchain Blocks
    get:
      deprecated: true
      tags:
        - deprecated
      summary: List blocks in the chain, most recent first
      operationId: blockListGet
      parameters:
        - name: latest
          in: query
          description: Most recent block to start with
          schema:
            type: integer
            format: string
        - name: count
          in: query
          description: Number of blocks to return
          schema:
            type: integer
            format: string
      responses:
        200:
          description: Blocks
          content:
            application/json:
              schema:
                type: object
                properties:
                  blocks:
                    type: array
                    items:
                      type: object
                      properties:
                        number:
                          type: integer
                        hash:
                          type: string
                        url:
                          type: string
                  next:
                    type: string
  /concord/blocks/{index}:
    summary: Specific Blockchain Block
    get:
      deprecated: true
      tags:
        - deprecated
      summary: Get a specific block, by its number in the chain
      operationId: blockGet
      parameters:
        - name: index
          in: path
          description: The index of the block to get
          required: true
          schema:
            type: integer
            format: string
          style: simple
      responses:
        200:
          description: Block
          content:
            application/json:
              schema:
                type: object
                properties:
                  number:
                    type: integer
                  hash:
                    type: string
                  parentHash:
                    type: string
                  nonce:
                    type: string
                  size:
                    type: integer
                  timestamp:
                    type: integer
                    description: The proposing replica's local system time. (In seconds since the UNIX epoch.)
                  transactions:
                    type: array
                    items:
                      type: string
  /concord/transactions/{hash}:
    summary: Specific Blockchain Block
    get:
      deprecated: true
      tags:
        - deprecated
      summary: Get a specific transaction, by its hash
      operationId: txGet
      parameters:
        - name: hash
          in: path
          description: The hash of the index to get
          required: true
          schema:
            type: string
          style: simple
      responses:
        200:
          description: Transaction
          content:
            application/json:
              schema:
                type: object
                properties:
                  hash:
                    type: string
                  from:
                    type: string
                  to:
                    type: string
                  contract_address:
                    type: string
                  value:
                    type: integer
                  input:
                    type: string
                  block_hash:
                    type: string
                  block_number:
                    type: integer
                  transaction_index:
                    type: integer
                  nonce:
                    type: integer
                  status:
                    type: integer
  /concord/eth:
    summary: Ethereum JSON RPC API
    get:
      deprecated: true
      tags:
        - deprecated
      summary: List available RPC methods
      operationId: ethJsonRpcGet
      responses:
        200:
          description: RPC Method List
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    params:
                      type: array
                      items:
                        type: object
    post:
      deprecated: true
      tags:
        - deprecated
      summary: Call the named procedure
      externalDocs:
        description: Ethereum JSON RPC Docs
        url: https://ethereum.gitbooks.io/frontier-guide/content/rpc.html
      operationId: ethJsonRpcPost
      requestBody:
        description: RPC Request
        content:
          application/json:
            schema:
              type: object
              required:
                - id
                - jsonrpc
                - method
                - params
              properties:
                id:
                  type: integer
                jsonrpc:
                  type: string
                method:
                  type: string
                params:
                  type: array
                  items:
                    type: object
      responses:
        200:
          description: RPC Result
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - jsonrpc
                properties:
                  id:
                    type: integer
                  jsonrpc:
                    type: string
                  result:
                    type: string
                  error:
                    type: string
  /concord/contracts:
    summary: Blockchain contracts
    get:
      deprecated: true
      tags:
        - deprecated
      summary: List all deployed contracts
      operationId: contractsGet
      responses:
        200:
          description: Returns a list of all contracts deployed to concord
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    contract_id:
                      type: string
                      description: String representing id of this contract
                    owner:
                      type: string
                      description: String representing address of the owner of this contract
                    url:
                      type: string
                      description: The URI representing this specific contract
    post:
      deprecated: true
      tags:
        - deprecated
      summary: Deploy a new contract to concord
      operationId: contractsPost
      requestBody:
        description: New contract POST request body
        content:
          application/json:
            schema:
              type: object
              required:
                - contract_id
                - version
                - from
                - sourcecode
                - contract_name
                - constructor_params
                - compiler_version
              properties:
                contract_id:
                  type: string
                  description: String representing contract id
                version:
                  type: string
                  description: String representing version number of this contract
                from:
                  type: string
                  description: String representing owners address
                sourcecode:
                  type: string
                  description: String representing solidity source code of this version
                contract_name:
                  type: string
                  description: String representing contract name you used to deploy the contract
                constructor_params:
                  type: string
                  description: String representing constructor parameters needed to deploy this contract, if your contract does not require constructor parameters, set this to ""
                compiler_version:
                  type: string
                  description: String representing solc version you used to deploy the contract
                is_optimize:
                  type: boolean
                  description: True if using the optimizer. False otherwise
                runs:
                  type: string
                  description: String representing optimize for how many times you intend to run the code
      responses:
        200:
          description: Description of deployed contract
          content:
            application/json:
              schema:
                type: array
                items:
                  properties:
                    contract_id:
                      type: string
                      description: String representing id of this contract
                    version:
                      type: string
                      description: String representing name of this version
                    url:
                      type: string
                      description: The URI representing this specific version
                    error:
                      type: string
                      description: Error message if any error occurred during deployment, null otherwise
  /concord/contracts/{contract_id}:
    get:
      deprecated: true
      tags:
        - deprecated
      summary: Get a contract with id `contract_id`
      operationId: GetContractById
      parameters:
        - name: contract_id
          in: path
          description: The id of the contract to get
          required: true
          schema:
            type: string
            format: string
          style: simple
      responses:
        200:
          description: Details of the particular contract
          content:
            application/json:
              schema:
                type: object
                properties:
                  contract_id:
                    type: string
                    description: String representing id of this contract
                  owner:
                    type: string
                    description: String representing address of the owner of this contract
                  versions:
                    type: array
                    items:
                      properties:
                        address:
                          type: string
                          description: String representing address at which this version is deployed
                        metadata:
                          type: object
                          description: A metadata JSON object about source code of this version generated by solidity compiler
                        version:
                          type: string
                          description: String representing name of this version
                        url:
                          type: string
                          description: The URI representing this specific version
  /concord/contracts/{contract_id}/versions/{version_name}:
    get:
      deprecated: true
      tags:
        - deprecated
      summary: Get a contract identified by given `contract_id` and `version_name`
      operationId: GetContractByIdAndVersion
      parameters:
        - name: contract_id
          in: path
          description: The id of the contract to get
          required: true
          schema:
            type: string
            format: string
          style: simple
        - name: version_name
          in: path
          description: Name of the version of contract to get
          required: true
          schema:
            type: string
            format: string
          style: simple
      responses:
        200:
          description: All details of a particular version of this particular contract
          content:
            application/json:
              schema:
                type: object
                properties:
                  contract_id:
                    type: string
                    description: String representing id of this contract
                  owner:
                    type: string
                    description: String representing address of the owner of this contract
                  version:
                    type: string
                    description: String representing name of this version
                  metadata:
                    type: object
                    description: A metadata JSON object about source code of this version generated by solidity compiler
                  address:
                    type: string
                    description: String representing address at which this version is deployed
                  bytecode:
                    type: string
                    description: String representing compiled bytecode of this version
                  sourcecode:
                    type: string
                    description: String representing the actual source code of this version
  /concord/contracts/{contract_address}:
    put:
      deprecated: true
      tags:
        - deprecated
      summary: Verify a contract identified by given `contract_address`
      operationId: PutContractByIdAndVersion
      parameters:
        - name: contract_address
          in: path
          description: The address of the contract
          required: true
          schema:
            type: string
            format: string
          style: simple
      requestBody:
        description: Verify contract PUT request body
        content:
          application/json:
            schema:
              type: object
              required:
                - contract_id
                - compiler_version
                - sourcecode
                - contract_name
              properties:
                contract_id:
                  type: string
                  description: String representing contract name
                compiler_version:
                  type: string
                  description: String representing solc version you used to deploy the contract
                sourcecode:
                  type: string
                  description: String representing solidity source code of this version
                contract_name:
                  type: string
                  description: String representing contract name you used to deploy the contract
                is_optimize:
                  type: boolean
                  description: True if using the optimizer. False otherwise
                runs:
                  type: string
                  description: String representing optimize for how many times you intend to run the code
      responses:
        200:
          description: All details of a particular version of this particular contract
          content:
            application/json:
              schema:
                type: object
                properties:
                  contract_id:
                    type: string
                    description: String representing id of this contract
                  owner:
                    type: string
                    description: String representing address of the owner of this contract
                  version:
                    type: string
                    description: String representing name of this version
                  metadata:
                    type: object
                    description: A metadata JSON object about source code of this version generated by solidity compiler
                  address:
                    type: string
                    description: String representing address at which this version is deployed
                  bytecode:
                    type: string
                    description: String representing compiled bytecode of this version
                  sourcecode:
                    type: string
                    description: String representing the actual source code of this version
  /blockchains:
    summary: Blockchain
    get:
      tags:
        - blockchains
      summary: List all blockchains
      operationId: getBlockchains
      responses:
        200:
          description: Returns a list of all accessible blockchains
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                      format: uuid
                      description: Blockchain ID
                    consortium_id:
                      type: string
                      format: uuid
                      description: ID of owning consortium
                    blockchain_type:
                      type: string
                      enum:
                        - ETHEREUM
                        - DAML
                        - HLF
                      description: Type of blockchain node
                    node_list:
                      deprecated: true
                      description: Please use replica_list
                      type: array
                      items:
                        type: object
                        properties:
                          node_id:
                            type: string
                            format: uuid
                            description: Node ID
                          ip:
                            type: string
                            description: IP address of node
                          url:
                            type: string
                            description: EthRPC url of node
                          cert:
                            type: string
                            description: SSL certificate to talk to ethrpc
                          zone_id:
                            type: string
                            format: uuid
                            description: Zone id this node is deployed in
                    replica_list:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: string
                            format: uuid
                            description: Replica ID
                          ip:
                            type: string
                            description: IP address of replica
                          url:
                            type: string
                            description: EthRPC url of replica
                          cert:
                            type: string
                            description: SSL certificate to talk to ethrpc
                          zone_id:
                            type: string
                            format: uuid
                            description: Zone id this replica is deployed in
    post:
      tags:
        - blockchains
      summary: Create a new blockchain
      operationId: blockchainPost
      requestBody:
        description: New blockchain POST request body
        content:
          application/json:
            schema:
              type: object
              required:
                - consortium_id
                - f_count
                - c_count
                - deployment_type
              properties:
                consortium_id:
                  type: string
                  format: uuid
                  description: ID of owning consortium
                f_count:
                  type: integer
                  description: Number of f replicas, cluster size will be 3f + 2c + 1
                c_count:
                  type: integer
                  description: Number of c replicas, cluster size will be 3f + 2c + 1
                deployment_type:
                  type: string
                  enum:
                    - FIXED
                    - UNSPECIFIED
                  description: FIXED or UNSPECIFIED, determines site locations
                blockchain_type:
                  type: string
                  enum:
                    - ETHEREUM
                    - DAML
                    - HLF
                  description: Type of blockchain node
                zone_ids:
                  description: |
                    List of zone IDs for replicas.  deployment_type must be FIXED.  Must contain 3f + 2c + 1 elements.
                  type: array
                  items:
                    type: string
                    format: uuid
      responses:
        202:
          description: Returns the deployment task ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  task_id:
                    type: string
                    format: uuid
                    description: Task ID
  /blockchains/zones:
    summary: Deployment zones for blockchains
    get:
      tags:
        - blockchains
      summary: Get available zones
      operationId: getBlockchainZones
      responses:
        200:
          $ref: '#/components/responses/ZoneListResponse'
        400:
          $ref: '#/components/responses/ErrorResponse'
        404:
          $ref: '#/components/responses/ErrorResponse'

    post:
      tags:
        - blockchains
      summary: Create a new new zone, or refresh zones
      operationId: createBlockchainOnpremZones
      parameters:
        - name: action
          in: query
          description: Refresh zones instead of creating
          schema:
            type: string
            enum: [reload]
      description: Create a new on-premises zone as defined
      requestBody:
        $ref: '#/components/requestBodies/CreateZoneRequest'
      responses:
        200:
          $ref: '#/components/responses/ZoneGetResponse'
        400:
          $ref: '#/components/responses/ErrorResponse'

  /blockchains/zones/{zone_id}:
    get:
      tags:
        - blockchains
      summary: Get Zone Details
      operationId: getOnpremZones
      parameters:
        - $ref: '#/components/parameters/ZoneId'
      responses:
        200:
          $ref: '#/components/responses/ZoneGetResponse'
    patch:
      tags:
        - blockchains
      summary: Update an on-premises zone
      operationId: patchOnpremZones
      description: Update an existing on-premises zone
      parameters:
        - name: zone_id
          in: path
          description: The id of the on-premises zone to update
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        $ref: '#/components/requestBodies/PatchZoneRequest'
      responses:
        200:
          $ref: '#/components/responses/ZoneGetResponse'
    delete:
      tags:
        - blockchains
      summary: Delete an on-premises zone
      operationId: DeleteOnpremZones
      description: Delete an on-premises zone
      parameters:
        - name: zone_id
          in: path
          description: The id of the on-premises zone to delete
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Successfully deleted zone
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    description: Deleted zone id

  /blockchains/{bid}:
    summary: Blockchain Operations
    get:
      tags:
        - blockchains
      summary: Get Blockchain information
      operationId: getBlockchain
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Returns the specified blockchain
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    description: Blockchain ID
                  consortium_id:
                    type: string
                    format: uuid
                    description: ID of owning consortium
                  blockchain_type:
                    type: string
                    enum:
                      - ETHEREUM
                      - DAML
                      - HLF
                    description: Type of blockchain node
                  node_list:
                    deprecated: true
                    description: Please use replica_list
                    type: array
                    items:
                      type: object
                      properties:
                        node_id:
                          type: string
                          format: uuid
                          description: Node ID
                        ip:
                          type: string
                          description: IP address of node
                        url:
                          type: string
                          description: EthRPC url of node
                        cert:
                          type: string
                          description: SSL certificate to talk to ethrpc
                        zone_id:
                          type: string
                          format: uuid
                          description: Deployment zone for this node
                  replica_list:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          description: Replica ID
                        ip:
                          type: string
                          description: IP address of replica
                        url:
                          type: string
                          description: EthRPC url of replica
                        cert:
                          type: string
                          description: SSL certificate to talk to ethrpc
                        zone_id:
                          type: string
                          format: uuid
                          description: Deployment zone for this replica
  /blockchains/{bid}/replicas:
    get:
      tags:
        - blockchains
      summary: Get list of replicas with status
      operationId: listReplicas
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: List of replicas and status
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                      format: uuid
                      description: Replica ID
                    name:
                      type: string
                      description: Replica Name
                    public_ip:
                      type: string
                      description: Public IP address of replica
                    rpc_url:
                      type: string
                      description: Public url to replica API
                    status:
                      type: string
                      description: Current status of replica
                    millis_since_last_message:
                      type: integer
                    millis_since_last_message_threshold:
                      type: integer
                    certificate:
                      type: string
                      description: SSL certificate of replica
                    zone_id:
                      type: string
                      format: uuid
                      description: Zone ID where this replica has been deployed
    post:
      tags:
        - blockchains
      summary: Start/stop a list of replicas
      operationId: replicaListStartStop
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
        - name: action
          in: query
          description: Start/stop
          schema:
            type: string
            enum: [start, stop]
      requestBody:
        description: Replicas to stop/start
        content:
          application/json:
            schema:
              type: object
              properties:
                node_ids:
                  deprecated: true
                  description: Please use replica_ids
                  type: array
                  items:
                    type: string
                    format: uuid
                replica_ids:
                  type: array
                  items:
                    type: string
                    format: uuid
        required: true
      responses:
        202:
          description: Task ids
          content:
            application/json:
              schema:
                type: object
                properties:
                  task_ids:
                    type: array
                    items:
                      type: string
                      format: uuid
  /blockchains/{bid}/replicas/{replica_id}:
    post:
      tags:
        - blockchains
      summary: Start/stop a replica
      operationId: replicaStartStop
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
        - name: replica_id
          required: true
          in: path
          description: Replica ID
          schema:
            type: string
            format: uuid
        - name: action
          required: true
          in: query
          description: Start/stop
          schema:
            type: string
            enum: [start, stop]
      responses:
        202:
          description: Task ids
          content:
            application/json:
              schema:
                type: object
                properties:
                  task_id:
                    type: string
                    format: uuid
  /blockchains/{bid}/concord/members:
    summary: Blockchain Consensus Membership List
    get:
      deprecated: true
      tags:
        - deprecated
      summary: Please use /api/blockchains/{bid}/replicas
      operationId: memberListGetBlk
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Members
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    hostname:
                      type: string
                    address:
                      type: string
                    status:
                      type: string
                    millis_since_last_message:
                      type: integer
                    millis_since_last_message_threshold:
                      type: integer
                    rpc_url:
                      type: string
                      format: url
  /blockchains/{bid}/concord/blocks:
    summary: Blockchain Blocks
    get:
      tags:
        - concord
      summary: List blocks in the chain, most recent first
      operationId: blockListGetBlk
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
        - name: latest
          in: query
          description: Most recent block to start with
          required: false
          schema:
            type: integer
            format: string
        - name: count
          in: query
          description: Number of blocks to return
          required: false
          schema:
            type: integer
            format: string
      responses:
        200:
          description: Blocks
          content:
            application/json:
              schema:
                type: object
                properties:
                  blocks:
                    type: array
                    items:
                      type: object
                      properties:
                        number:
                          type: integer
                        hash:
                          type: string
                        url:
                          type: string
                  next:
                    type: string
  /blockchains/{bid}/concord/blocks/{index}:
    summary: Specific Blockchain Block
    get:
      tags:
        - concord
      summary: Get a specific block, by its number in the chain
      operationId: blockGetBlk
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
        - name: index
          in: path
          description: The index of the block to get
          required: true
          schema:
            type: integer
            format: string
      responses:
        200:
          description: Block
          content:
            application/json:
              schema:
                type: object
                properties:
                  number:
                    type: integer
                  hash:
                    type: string
                  parentHash:
                    type: string
                  nonce:
                    type: string
                  size:
                    type: integer
                  timestamp:
                    type: integer
                    description: The proposing replica's local system time. (In seconds since the UNIX epoch.)
                  transactions:
                    type: array
                    items:
                      type: string
  /blockchains/{bid}/concord/transactions/{hash}:
    summary: Specific Blockchain Block
    get:
      tags:
        - concord
      summary: Get a specific transaction, by its hash
      operationId: txGetBlk
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
        - name: hash
          in: path
          description: The hash of the index to get
          required: true
          schema:
            type: string
      responses:
        200:
          description: Transaction
          content:
            application/json:
              schema:
                type: object
                properties:
                  hash:
                    type: string
                  from:
                    type: string
                  to:
                    type: string
                  contract_address:
                    type: string
                  value:
                    type: integer
                  input:
                    type: string
                  block_hash:
                    type: string
                  block_number:
                    type: integer
                  transaction_index:
                    type: integer
                  nonce:
                    type: integer
                  status:
                    type: integer
  /blockchains/{bid}/concord/eth:
    summary: Ethereum JSON RPC API
    post:
      tags:
        - ethereum
      summary: Call the named procedure
      externalDocs:
        description: Ethereum JSON RPC Docs
        url: https://ethereum.gitbooks.io/frontier-guide/content/rpc.html
      operationId: ethJsonRpcPostBlk
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid


      requestBody:
        description: RPC Request
        content:
          application/json:
            schema:
              type: object
              required:
                - id
                - jsonrpc
                - method
                - params
              properties:
                id:
                  type: integer
                jsonrpc:
                  type: string
                method:
                  type: string
                params:
                  type: array
                  items:
                    type: object
      responses:
        200:
          description: RPC Result
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - jsonrpc
                properties:
                  id:
                    type: integer
                  jsonrpc:
                    type: string
                  result:
                    type: string
                  error:
                    type: string
  /blockchains/{bid}/concord/contracts:
    summary: Blockchain contracts
    get:
      tags:
        - contracts
      summary: List all deployed contracts
      operationId: contractsGetBlk
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Returns a list of all contracts deployed to concord
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    contract_id:
                      type: string
                      description: String representing id of this contract
                    owner:
                      type: string
                      description: String representing address of the owner of this contract
                    url:
                      type: string
                      description: The URI representing this specific contract
    post:
      tags:
        - contracts
      summary: Deploy a new contract to concord
      operationId: ContractsPostBlk
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
      requestBody:
        description: New contract POST request body
        content:
          application/json:
            schema:
              type: object
              required:
                - contract_id
                - version
                - from
                - sourcecode
                - contract_name
                - compiler_version
              properties:
                contract_id:
                  type: string
                  description: String representing contract id
                version:
                  type: string
                  description: String representing version number of this contract
                from:
                  type: string
                  description: String representing owners address
                sourcecode:
                  type: string
                  description: String representing solidity source code of this version
                contract_name:
                  type: string
                  description: String representing contract name you used to deploy the contract
                constructor_params:
                  type: string
                  description: String representing constructor parameters needed to deploy this contract, if your contract does not require constructor parameters, set this to ""
                compiler_version:
                  type: string
                  description: String representing solc version you used to deploy the contract
                is_optimize:
                  type: boolean
                  description: True if using the optimizer. False otherwise
                runs:
                  type: string
                  description: String representing optimize for how many times you intend to run the code
      responses:
        200:
          description: Description of deployed contract
          content:
            application/json:
              schema:
                type: array
                items:
                  properties:
                    contract_id:
                      type: string
                      description: String representing id of this contract
                    version:
                      type: string
                      description: String representing name of this version
                    url:
                      type: string
                      description: The URI representing this specific version
                    error:
                      type: string
                      description: Error message if any error occurred during deployment, null otherwise
  /blockchains/{bid}/concord/contracts/{contract_id}:
    get:
      tags:
        - contracts
      summary: Get a contract with id `contract_id`
      operationId: GetContractByIdBlk
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
        - name: contract_id
          in: path
          description: The id of the contract to get
          required: true
          schema:
            type: string
            format: string
          style: simple
      responses:
        200:
          description: Details of the particular contract
          content:
            application/json:
              schema:
                type: object
                properties:
                  contract_id:
                    type: string
                    description: String representing id of this contract
                  owner:
                    type: string
                    description: String representing address of the owner of this contract
                  versions:
                    type: array
                    items:
                      properties:
                        address:
                          type: string
                          description: String representing address at which this version is deployed
                        metadata:
                          type: object
                          description: A metadata JSON object about source code of this version generated by solidity compiler
                        version:
                          type: string
                          description: String representing name of this version
                        url:
                          type: string
                          description: The URI representing this specific version
  /blockchains/{bid}/concord/contracts/{contract_id}/versions/{version_name}:
    get:
      tags:
        - contracts
      summary: Get a contract identified by given `contract_id` and `version_name`
      operationId: GetContractByIdAndVersionBlk
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
        - name: contract_id
          in: path
          description: The id of the contract to get
          required: true
          schema:
            type: string
            format: string
          style: simple
        - name: version_name
          in: path
          description: Name of the version of contract to get
          required: true
          schema:
            type: string
            format: string
          style: simple
      responses:
        200:
          description: All details of a particular version of this particular contract
          content:
            application/json:
              schema:
                type: object
                properties:
                  contract_id:
                    type: string
                    description: String representing id of this contract
                  owner:
                    type: string
                    description: String representing address of the owner of this contract
                  version:
                    type: string
                    description: String representing name of this version
                  metadata:
                    type: object
                    description: A metadata JSON object about source code of this version generated by solidity compiler
                  address:
                    type: string
                    description: String representing address at which this version is deployed
                  bytecode:
                    type: string
                    description: String representing compiled bytecode of this version
                  sourcecode:
                    type: string
                    description: String representing the actual source code of this version
  /blockchains/{bid}/concord/contracts/{contract_address}:
    put:
      tags:
        - contracts
      summary: Verify a contract identified by given `contract_address`
      operationId: PutContractByIdAndVersionBlk
      parameters:
        - name: bid
          in: path
          description: Blockchain ID
          required: true
          schema:
            type: string
            format: uuid
        - name: contract_address
          in: path
          description: The address of the contract
          required: true
          schema:
            type: string
            format: string
          style: simple
      requestBody:
        description: Verify contract PUT request body
        content:
          application/json:
            schema:
              type: object
              required:
                - contract_id
                - compiler_version
                - sourcecode
                - contract_name
              properties:
                contract_id:
                  type: string
                  description: String representing contract name
                compiler_version:
                  type: string
                  description: String representing solc version you used to deploy the contract
                sourcecode:
                  type: string
                  description: String representing solidity source code of this version
                contract_name:
                  type: string
                  description: String representing contract name you used to deploy the contract
                is_optimize:
                  type: boolean
                  description: True if using the optimizer. False otherwise
                runs:
                  type: string
                  description: String representing optimize for how many times you intend to run the code
        required: true
      responses:
        200:
          description: All details of a particular version of this particular contract
          content:
            application/json:
              schema:
                type: object
                properties:
                  contract_id:
                    type: string
                    description: String representing id of this contract
                  owner:
                    type: string
                    description: String representing address of the owner of this contract
                  version:
                    type: string
                    description: String representing name of this version
                  metadata:
                    type: object
                    description: A metadata JSON object about source code of this version generated by solidity compiler
                  address:
                    type: string
                    description: String representing address at which this version is deployed
                  bytecode:
                    type: string
                    description: String representing compiled bytecode of this version
                  sourcecode:
                    type: string
                    description: String representing the actual source code of this version

  /blockchains/{bid}/clients:
    summary: Client GET/POST API
    post:
      tags:
        - client
      summary: Call the named procedure
      operationId: postClient
      parameters:
        - name: bid
          required: true
          in: path
          description: Blockchain ID
          schema:
            type: string
            format: uuid
      requestBody:
        description: RPC Request
        content:
          application/json:
            schema:
              type: object
              required:
                - zoneIds
              properties:
                zoneIds:
                  type: array
                  items:
                    type: object
      responses:
        202:
          description: Returns the deployment task ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  task_id:
                    type: string
                    format: uuid
                    description: Task ID
    get:
      tags:
        - blockchains
      summary: List all client nodes
      operationId: getClients
      responses:
        200:
          description: Returns a list of all client nodes
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    public_ip:
                      type: string
                      format: ip
                      description: Public IP
                    private_ip:
                      type: string
                      format: ip
                      description: Private IP
                    host_name:
                      type: string
                      description: Host Name
                    url:
                      type: string
                      description: URL
                    cert:
                      type: string
                      description: Cert
                    zone_id:
                      type: string
                      format: uuid
                      description: Zone ID
                    replica_type:
                      type: string
                      enum:
                        - NONE
                        - DAML_PARTICIPANT
                      description: Type of replica
                    blockchain_id:
                      type: string
                      format: uuid
                      description: Blockchain ID
  /consortiums:
    summary: GetConsortium
    get:
      tags:
        - profiles
      summary: List all accessible consortiums
      operationId: getConsortiums
      responses:
        200:
          description: Returns a list of all accessible consortiums
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    consortium_id:
                      type: string
                      format: uuid
                      description: Consortium ID
                    consortium_name:
                      type: string
                      format: string
                      description: Name of Consortium
    post:
      tags:
        - profiles
      summary: Creates a new Consortium
      operationId: consortiumPost
      requestBody:
        description: New consortium POST request body
        content:
          application/json:
            schema:
              type: object
              required:
                - consortium_name
                - consortium_type
                - organization
              properties:
                consortium_name:
                  type: string
                  format: string
                  description: Name of consortium
                consortium_type:
                  type: string
                  format: string
                  description: Type of consortium
                organization:
                  type: string
                  format: UUID
                  description: Organization that the consortium is a part of
      responses:
        200:
          description: Returns the consortium ID and Name
          content:
            application/json:
              schema:
                type: object
                properties:
                  con_id:
                    type: string
                    format: UUID
                    description: Consortium ID
                  consortium_name:
                    type: string
                    format: string
                    description: Consortium Name
  /consortiums/{con_id}:
    summary: GetConsortium_byID
    get:
      tags:
        - profiles
      summary: Get Consortium by its ID
      operationId: getConsortium
      parameters:
        - name: con_id
          in: path
          description: Consortium ID
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Returns the specified consortium
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    org_id:
                      type: string
                      format: uuid
                      description: Consortium ID
                    organization_name:
                      type: string
                      format: string
                      description: Name of Consortium
    patch:
      tags:
        - profiles
      summary: Update an existing consortium
      operationId: consortiumPatch
      parameters:
        - name: con_id
          in: path
          description: Consortium ID
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: Consortium items to patch
        content:
          application/json:
            schema:
              type: object
              properties:
                consortium_name:
                  type: string
                  format: string
                  description: Name of consortium
                consortium_type:
                  type: string
                  format: string
                  description: Type of consortium
                orgs_to_add:
                  type: array
                  items:
                    type: string
                    format: uuid
                    description: Organizations to add as members of this consortium
                orgs_to_remove:
                  type: array
                  items:
                    type: string
                    format: uuid
                    description: Organizations to remove as members of this consortium
        required: true
      responses:
        200:
          description: Returns the Consortium ID and Name
          content:
            application/json:
              schema:
                type: object
                properties:
                  con_id:
                    type: string
                    format: uuid
                    description: Consortium ID
                  consortium_name:
                    type: string
                    format: string
                    description: Consortium Name
                  organization:
                    type: string
                    format: uuid
                    description: Owning organization
                  members:
                    type: array
                    items:
                      type: object
                      properties:
                        org_id:
                          type: string
                          format: uuid
                          description: Organization Id
                        organization_name:
                          type: string
                          description: Organization name
  /consortiums/{con_id}/organizations:
    summary: Get consortium members
    get:
      tags:
        - profiles
      summary: Get Consortium Members
      operationId: getConsortiumMembers
      parameters:
        - name: con_id
          in: path
          description: Consortium ID
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Returns the members of the specified consortium
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    org_id:
                      type: string
                      format: uuid
                      description: Organization Id
                    organization_name:
                      type: string
                      description: Organization name
  /organizations:
    summary: GetOrganization
    get:
      tags:
        - profiles
      summary: List all organizations
      operationId: getOrganizations
      responses:
        200:
          description: Returns a list of all organizations
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    orgId:
                      type: string
                      format: uuid
                      description: Organization ID
                    organization_name:
                      type: string
                      format: string
                      description: Name of organization
    post:
      deprecated: true
      tags:
        - deprecated
      summary: Creates a new organization
      operationId: organizationPost
      requestBody:
        description: New organization POST request body
        content:
          application/json:
            schema:
              type: object
              required:
                - organization_name
              properties:
                organization_name:
                  type: string
                  format: string
                  description: Name of organization
        required: true
      responses:
        200:
          description: Returns the organization ID and Name
          content:
            application/json:
              schema:
                type: object
                properties:
                  org_id:
                    type: string
                    format: uuid
                    description: Organization ID
                  OrganizationName:
                    type: string
                    format: string
                    description: Organization Name
  /organizations/{org_id}:
    summary: GetOrganization_byid
    get:
      tags:
        - profiles
      summary: Get Organization by its id
      operationId: getOrganization
      parameters:
        - name: org_id
          in: path
          description: Organization ID
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Returns the specified organization
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    org_id:
                      type: string
                      format: uuid
                      description: Organization ID
                    organization_name:
                      type: string
                      format: string
                      description: Name of organization
    patch:
      deprecated: true
      tags:
        - deprecated
      summary: Update an existing organization
      operationId: organizationPatch
      parameters:
        - name: org_id
          in: path
          description: Organization ID
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: Organization items to patch
        content:
          application/json:
            schema:
              type: object
              properties:
                Organization_name:
                  type: string
                  description: Updating name of the organization
        required: true
      responses:
        200:
          description: Returns the organization ID and Name
          content:
            application/json:
              schema:
                type: object
                properties:
                  org_id:
                    type: string
                    format: uuid
                    description: Organization ID
                  OrganizationName:
                    type: string
                    format: string
                    description: Organization Name
  /tasks:
    summary: Get all Tasks
    get:
      tags:
        - tasks
      summary: Get the statuses of all tasks
      operationId: listTask
      responses:
        200:
          description: Returns the current task status
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    task_id:
                      type: string
                      format: uuid
                      description: Task ID
                    state:
                      type: string
                      enum:
                        - RUNNING
                        - SUCCEEDED
                        - FAILED
                      description: Current state of of the task
                    message:
                      type: string
                      description: Additional information from the task
                    resource_id:
                      type: string
                      format: uuid
                      description: The resoruce created or updated by this task.  May not be accurate until state is FAILED or SUCCEEDED.
                    resource_link:
                      type: string
                      format: uri
                      description: Link to the resource created or updated by this task.
    post:
      tags:
        - tasks
      summary: Get the statuses of listed tasks
      operationId: getTaskList
      parameters:
        - name: get_state
          in: query
          description: Get states
          required: true
          schema:
            type: string
      requestBody:
        required: true
        description: List of task ids
        content:
          application/json:
            schema:
              type: object
              properties:
                task_ids:
                  type: array
                  items:
                    type: string
                    format: uuid
      responses:
        200:
          description: Returns the current task status
          content:
            application/json:
              schema:
                type: object
                properties:
                  states:
                    type: array
                    items:
                      type: object
                      properties:
                        task_id:
                          type: string
                          format: uuid
                          description: Task ID
                        state:
                          type: string
                          enum:
                            - RUNNING
                            - SUCCEEDED
                            - FAILED
                          description: Current state of of the task
                        message:
                          type: string
                          description: Additional information from the task
                        resource_id:
                          type: string
                          format: uuid
                          description: The resoruce created or updated by this task.  May not be accurate until state is FAILED or SUCCEEDED.
                        resource_link:
                          type: string
                          format: uri
                          description: Link to the resource created or updated by this task.
  /tasks/{task_id}:
    summary: Tasks
    get:
      tags:
        - tasks
      summary: Get the status of the specified task
      operationId: getTask
      parameters:
        - name: task_id
          in: path
          description: Task ID
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Returns the current task status
          content:
            application/json:
              schema:
                type: object
                properties:
                  task_id:
                    type: string
                    format: uuid
                    description: Task ID
                  state:
                    type: string
                    enum:
                      - RUNNING
                      - SUCCEEDED
                      - FAILED
                    description: Current state of of the task
                  message:
                    type: string
                    description: Additional information from the task
                  resource_id:
                    type: string
                    format: uuid
                    description: The resoruce created or updated by this task.  May not be accurate until state is FAILED or SUCCEEDED.
                  resource_link:
                    type: string
                    format: uri
                    description: Link to the resource created or updated by this task.
  /users:
    summary: Helen User management
    get:
      deprecated: true
      tags:
        - deprecated
      summary: Get a list of user which belong to specific organization and specific consortium
      operationId: usersGet
      parameters:
        - in: query
          name: consortium
          description: ID of the consortium
          required: true
          schema:
            type: string
        - in: query
          name: organization
          description: ID of the organization
          required: true
          schema:
            type: string
      responses:
        200:
          description: Returns a list of all users who are part of given consortium and given organization
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    user_id:
                      type: string
                      format: uuid
                      description: UUID value representing ID of this user
                    name:
                      type: string
                      description: String representing name of this user
                    email:
                      type: string
                      description: String representing email of this user
                    role:
                      type: string
                      description: String representing role of this user
                    last_login:
                      type: integer
                      description: Integer value representing the time (in milliseconds since epoch) when this user last logged in
                    details:
                      type: object
                      properties:
                        first_name:
                          type: string
                          description: First name of this user
                        last_name:
                          type: string
                          description: Last name of this user
                    consortium:
                      type: object
                      properties:
                        consortium_id:
                          type: string
                          format: uuid
                          description: ID of consortium to which this user belongs
                        consortium_name:
                          type: string
                          description: Name of consortium to which this user belongs
                    organization:
                      type: object
                      properties:
                        organization_id:
                          type: string
                          format: uuid
                          description: ID of organization to which this user belongs
                        organization_name:
                          type: string
                          description: Name of organization to which this user belongs
    post:
      deprecated: true
      tags:
        - deprecated
      summary: Create a new user in Helen
      operationId: usersPost
      requestBody:
        description: User creation POST request body
        required: true
        content:
          application/json:
            schema:
              required:
                - name
                - email
                - role
                - consortium
                - organization
                - password
              type: object
              properties:
                name:
                  type: string
                  description: String representing name of this user
                email:
                  type: string
                  description: String representing email of this user
                role:
                  type: string
                  description: String representing role of this user
                details:
                  type: object
                  properties:
                    first_name:
                      type: string
                      description: First name of this user
                    last_name:
                      type: string
                      description: Last name of this user
                consortium:
                  type: object
                  properties:
                    consortium_id:
                      type: string
                      format: uuid
                      description: ID of consortium to which this user belongs
                organization:
                  type: object
                  properties:
                    organization_id:
                      type: string
                      format: uuid
                      description: ID of organization to which this user belongs
                password:
                  type: string
                  description: Password of this user
      responses:
        200:
          description: User ID of newly created user
          content:
            application/json:
              schema:
                type: object
                properties:
                  user_id:
                    type: string
                    format: uuid
                    description: User ID of newly created user
  /users/{user_id}:
    summary: Helen User management
    get:
      tags:
        - profiles
      summary: Get the user identified by given user_id
      operationId: GetUserById
      parameters:
        - name: user_id
          in: path
          description: The id of the user to get
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      responses:
        200:
          description: Returns a json object describing specified user
          content:
            application/json:
              schema:
                type: object
                properties:
                  user_id:
                    type: string
                    format: uuid
                    description: UUID value representing ID of this user
                  name:
                    type: string
                    description: String representing name of this user
                  email:
                    type: string
                    description: String representing email of this user
                  role:
                    type: string
                    description: String representing role of this user
                  last_login:
                    type: integer
                    description: Integer value representing the time (in milliseconds since epoch) when this user last logged in
                  details:
                    type: object
                    properties:
                      first_name:
                        type: string
                        description: First name of this user
                      last_name:
                        type: string
                        description: Last name of this user
                  consortium:
                    type: object
                    properties:
                      consortium_id:
                        type: string
                        format: uuid
                        description: ID of consortium to which this user belongs
                      consortium_name:
                        type: string
                        description: Name of consortium to which this user belongs
                  organization:
                    type: object
                    properties:
                      organization_id:
                        type: string
                        format: uuid
                        description: ID of organization to which this user belongs
                      organization_name:
                        type: string
                        description: Name of organization to which this user belongs
    patch:
      deprecated: true
      tags:
        - deprecated
      summary: Update user information
      operationId: UpdateUser
      parameters:
        - name: user_id
          in: path
          description: The id of the user to update
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      requestBody:
        description: User PATCH request body
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: New name of the user
                email:
                  type: string
                  description: New email of the user
                role:
                  type: string
                  description: New role of the user
                details:
                  type: object
                  properties:
                    first_name:
                      type: string
                      description: New first name of the user
                    last_name:
                      type: string
                      description: New last name of the user
        required: true
      responses:
        200:
          description: Successful patch
          content:
            application/json:
              schema:
                type: object
                properties: {}
  /auth/login:
    summary: Helen User management
    post:
      deprecated: true
      tags:
        - deprecated
      summary: Authenticate a user
      operationId: AuthenticateUser
      parameters:
        - name: user_id
          in: path
          description: The id of the user to authenticate
          required: true
          schema:
            type: string
            format: uuid
          style: simple
      requestBody:
        description: Authenticate user POST request body
        content:
          application/json:
            schema:
              required:
                - password
              type: object
              properties:
                password:
                  type: string
                  description: Password of the user
      responses:
        200:
          description: Returns an object with at least an `isAuthenticated` field. If login failed, the value of this field is `false`. If login succeeded, the value of this field is `true`, and the rest of the fields of a user-GET response are also included.
          content:
            application/json:
              schema:
                type: object
                properties:
                  user_id:
                    type: string
                    format: uuid
                    description: Integer value representing ID of this user
                  name:
                    type: string
                    description: String representing name of this user
                  email:
                    type: string
                    description: String representing email of this user
                  role:
                    type: string
                    description: String representing role of this user
                  last_login:
                    type: integer
                    description: Integer value representing the time (in milliseconds since epoch) when this user last logged in
                  details:
                    type: object
                    properties:
                      first_name:
                        type: string
                        description: First name of this user
                      last_name:
                        type: string
                        description: Last name of this user
                  consortium:
                    type: object
                    properties:
                      consortium_id:
                        type: string
                        format: uuid
                        description: ID of consortium to which this user belongs
                      consortium_name:
                        type: string
                        description: Name of consortium to which this user belongs
                  organization:
                    type: object
                    properties:
                      organization_id:
                        type: string
                        format: uuid
                        description: ID of organization to which this user belongs
                      organization_name:
                        type: string
                        description: Name of organization to which this user belongs
                  isAuthenticated:
                    type: boolean
                    description: True if login succeeded. False otherwise.
  /auth/change-password:
    summary: Change user password
    post:
      deprecated: true
      tags:
        - deprecated
      summary: Change a user password
      operationId: ChangePassword
      requestBody:
        description: Authenticate user POST request body
        content:
          application/json:
            schema:
              required:
                - email
                - password
              type: object
              properties:
                email:
                  type: string
                  description: Email of the user
                password:
                  type: string
                  description: New password of the user
      responses:
        200:
          description: Returns an object with at least an `isAuthenticated` field. If login failed, the value of this field is `false`. If login succeeded, the value of this field is `true`, and the rest of the fields of a user-GET response are also included.
          content:
            application/json:
              schema:
                type: object
                properties:
                  user_id:
                    type: string
                    format: uuid
                    description: Integer value representing ID of this user
                  name:
                    type: string
                    description: String representing name of this user
                  email:
                    type: string
                    description: String representing email of this user
                  role:
                    type: string
                    description: String representing role of this user
                  last_login:
                    type: integer
                    description: Integer value representing the time (in milliseconds since epoch) when this user last logged in
                  details:
                    type: object
                    properties:
                      first_name:
                        type: string
                        description: First name of this user
                      last_name:
                        type: string
                        description: Last name of this user
                  consortium:
                    type: object
                    properties:
                      consortium_id:
                        type: string
                        format: uuid
                        description: ID of consortium to which this user belongs
                      consortium_name:
                        type: string
                        description: Name of consortium to which this user belongs
                  organization:
                    type: object
                    properties:
                      organization_id:
                        type: string
                        format: uuid
                        description: ID of organization to which this user belongs
                      organization_name:
                        type: string
                        description: Name of organization to which this user belongs
                  isAuthenticated:
                    type: boolean
                    description: True if login succeeded. False otherwise.
  /auth/token:
    summary: Refresh auth token
    post:
      deprecated: true
      tags:
        - deprecated
      summary: Refresh authentication token
      operationId: RefreshToken
      requestBody:
        description: Refresh authentication token
        content:
          application/json:
            schema:
              required:
                - refresh_token
              type: object
              properties:
                refresh_token:
                  type: string
                  description: Token needed to generate new authentication token.
      responses:
        200:
          description: Returns an object with a token, token_expires and refresh_token.
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: Token used for authentication.
                  refresh_token:
                    type: string
                    description: Token used to regenerate a token, token_expires and refresh_token
                  token_expires:
                    type: string
                    description: Amount of time till your token expires.
  /oauth/token:
    summary: Return token information of logged in user
    get:
      tags:
        - profiles
      operationId: OauthToken
      responses:
        200:
          description: Returns information of the currently logged in user
          content:
            application/json:
              schema:
                type: object
                properties:
                  auth_token:
                    type: string
                    description: Current Authentication token as JWT
                  id_token:
                    type: string
                    description: Open ID token
                  email:
                    type: string
                    description: User account
                  last_login:
                    type: integer
                    description: Last login time
components:
  schemas:
    Error:
      type: object
      properties:
        errorCode:
          type: string
          description: Error Code
        errorMessage:
          type: string
          description: Localized error message
        status:
          type: integer
          description: HTTP status code
        path:
          type: string
          description: URI causing error

    BaseZone:
      type: object
      required:
        - name
        - type
      properties:
        type:
          type: string
          enum: [VMC_AWS, ON_PREM]
          example:
            ON_PREM
        name:
          type: string
          example: VMC SDDC2
        latitude:
          type: string
          example: 45.2551139
        longitude:
          type: string
          example: -120.888727

    BaseZoneGet:
      type: object
      properties:
        id:
          type: string
          format: uuid
      allOf:
        - $ref: '#/components/schemas/BaseZone'

    OnPremZonePost:
      type: object
      required:
        - vcenter
        - network
        - resource_pool
        - storage
        - folder
      allOf:
        - $ref: '#/components/schemas/BaseZone'
      properties:
        vcenter:
          $ref: '#/components/schemas/PostEndpoint'
        network:
          $ref: '#/components/schemas/Network'
        resource_pool:
          type: string
          description: Name of resource pool to use for deployment
          example:
            Resource Pool
        storage:
          type: string
          description: Name of storage to use for deployment
          example:
            Datastore
        folder:
          type: string
          description: vCenter folder for deployment
          example:
            Blockchain Folder
        container_repo:
          $ref: '#/components/schemas/PostEndpoint'
        log_managements:
          $ref: '#/components/schemas/OnPremLogManagementsPost'
        wavefront:
          $ref: '#/components/schemas/WavefrontData'

    OnPremZoneGet:
      type: object
      allOf:
        - $ref: '#/components/schemas/BaseZone'
      properties:
        id:
          type: string
          format: uuid
          description: Zone ID
        org_id:
          type: string
          format: uuid
          description: Organization ID
        vcenter:
          $ref: '#/components/schemas/GetEndpoint'
        network:
          $ref: '#/components/schemas/Network'
        resouce_pool:
          type: string
          description: Name of resource pool to use for deployment
          example:
            Resource Pool
        storage:
          type: string
          description: Name of storage to use for deployment
          example:
            Datastore
        folder:
          type: string
          description: vCenter folder for deployment
          example:
            Blockchain Folder
        container_repo:
          $ref: '#/components/schemas/GetEndpoint'
        log_managements:
          $ref: '#/components/schemas/OnPremLogManagementsGet'
        wavefront:
          $ref: '#/components/schemas/WavefrontData'

    # Swagger viewer does not display discriminated types correctly.  Temporarily changing this to allOf
    # just to get the fields listed
#    Zone:
#      type: object
#      discriminator:
#        propertyName: type
#      oneOf:
#        - $ref: '#/components/schemas/BaseZoneGet'
#        - $ref: '#/components/schemas/OnPremZoneGet'

    Zone:
      type: object
      allOf:
        - $ref: '#/components/schemas/OnPremZoneGet'

    PostEndpoint:
      type: object
      properties:
        url:
          type: string
          description: URL of endpoint
          example:
            https://service.com
        username:
          type: string
          description: Username for credentials
          example:
            user@server.com
        password:
          type: string
          description: Password for credentials
          example:
            p4$$w0rd

    GetEndpoint:
      type: object
      properties:
        url:
          type: string
          description: URL of endpoint
          example:
            https://service.com
        username:
          type: string
          description: Username for credentials
          example:
            user@server.com

    Network:
      type: object
      properties:
        name:
          type: string
          description: Name of network to use
          example:
            Blockchain Network
        ip_pool:
          type: array
          description: IP pool list
          example:
            [10.1.1.16-10.1.1.64,10.1.1.100-10.1.1.200,10.1.1.253]
          items:
            type: string
        gateway:
          type: string
          description: Gateway IP address
          example:
            10.1.1.124
        subnet:
          type: string
          description: IP Subnet
          example:
            24
        name_servers:
          type: array
          description: List of name servers
          example:
            [10.1.1.10, 10.1.1.11]
          items:
            type: string

    WavefrontData:
      description: Configurations for wavefront setup
      type: object
      required:
        - url
        - token
      properties:
        url:
          type: string
          description: Endpoint of wavefront setup.
          example: https://example.com
        token:
          type: string
          description: Auth token provided by wavefront
          example: <random-token>

    OnPremLogManagementsPost:
      description: List of configurations for logging setup
      type: object
      items:
        type: object
        required:
          - destination
          - address
          - username
          - password
        properties:
          destination:
            type: string
            description: |
              Log destination. Currently supported options - "LOG_INTELLIGENCE" or "LOG_INSIGHT"
            enum: [LOG_INTELLIGENCE, LOG_INSIGHT]
            example: LOG_INSIGHT
          address:
            type: string
            description: |
              Endpoint of the logging setup. Specify port separated by a &#58; if the endpoint is an IP address
            example: https://example.com
          username:
            type: string
            description: Username to be used for authentication when sending logs to destination
            example: foobar
          password:
            type: string
            description: Password to be used for authentication when sending logs to destination
            example: P@$$
          log_insight_agent_id:
            type: integer
            description: ID of an agent setup for Log Insight
            example: 100

    OnPremLogManagementsGet:
      description: Available logging setup
      type: array
      items:
        type: object
        properties:
          destination:
            type: string
            description: Log destination
            enum: [LOG_INTELLIGENCE, LOG_INSIGHT]
            example: LOG_INSIGHT
          address:
            type: string
            description: Endpoint of the logging setup
            example: https://example.com
          username:
            type: string
            description: Username used for sending logs to destination
            example: foobar


  responses:
    ErrorResponse:
      description: Error Response
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'

    ZoneListResponse:
      description: List of available zones
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/BaseZoneGet'

    ZoneGetResponse:
      description: Get Zone information details.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Zone'


  requestBodies:
    CreateZoneRequest:
      description: Create a new zone
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/OnPremZonePost'

    PatchZoneRequest:
      description: Patch an existing zone
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/OnPremZonePost'

  parameters:
    ZoneId:
      name: zone_id
      in: path
      description: The id of the on-premises zone to get
      required: true
      schema:
        type: string
        format: uuid

