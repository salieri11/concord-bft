To build the VMware Blockchain Orchestrator appliance:

1. Prepare a Common Appliance Platform (CAP) environment as described here:
https://confluence.eng.vmware.com/pages/viewpage.action?spaceKey=CPDVC&title=CAP+-+Getting+Started

2. The following assumes you have your CAP environment under the $CommonAppliancePlatform directory.

3. Copy the following files from this directory to $CommonAppliancePlatform

    orchestrator-appliance-customizations.json
    orchestrator-appliance-remote.json
    blockchain.service
    orchestrator-prereqs-launcher.sh
    cap-firstboot.sh
    post-install-castor.sh
    VMware_EULA_20190913_English.txt
    eula.script

4. Modify the configuration/repositories/local json 
   entry in orchestrator-appliance-remote.json to point to the absolute path for $CommonAppliancePlatform.

5. Update the docker containers version for Castor services in 
       ONPREM_BLOCKCHAIN_VERSION
   in post-install-castor.sh

6. Update the kernel version for the base image used to build the Castor OVF in
       LINUX_KERNEL_VERSION 
   in post-install-castor.sh

7. cd $CommonAppliancePlatform

8. Init the cap tool:
    ./cap init

9. Remove any previously built images, and old log files:
    rm -rf images/* logs/*

10. Remove any vmware-blockchain-appliance VMs on the target vCenter.

11A. Build the OVF:
    ./cap build -f orchestrator-appliance-remote.json

11B. To build an OVF for automation/QE, where EULA is already accepted:
    In orchestrator-appliance-remote.json, set this:
	"after-appliance-ready-script": "post-install-castor-TESTBUILD.sh"

12. The new OVF should be available under $CommonAppliancePlatform/images.

