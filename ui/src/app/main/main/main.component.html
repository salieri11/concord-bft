<clr-main-container>
  <clr-alerts>
    <clr-alert *ngFor="let alert of alerts" [clrAlertType]="'danger'" [clrAlertAppLevel]="true">
      <clr-alert-item>
        <span class="alert-text">
          {{ alert.message }}
        </span>
      </clr-alert-item>
    </clr-alert>
  </clr-alerts>
  <concord-app-header></concord-app-header>
  <div class="content-container">
    <main class="content-area">
      <router-outlet *ngIf="routeService.outletEnabled"></router-outlet>
      <div *ngIf="!routeService.outletEnabled && showErrorMessage" class="clr-row clr-justify-content-center">
        <div class="clr-col-lg-5 clr-col-md-8 clr-col-12">
          <div class="card error">
            <div class="card-header">
              {{ 'error.title' | translate }} - {{ error.status }}
            </div>
            <div class="card-block">
              <div class="card-text">
                {{ 'error.403' | translate }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <clr-vertical-nav *ngIf="sidemenuVisible" class="sidemenu">
      <ng-container *concordCanView="[personas.SystemsAdmin, personas.ConsortiumAdmin]">
        <a clrVerticalNavLink [routerLink]="['/blockchain','deploy']" [ngClass]="{'disable': !enableDeploy}"
          id="sidebarDeploy">
          <clr-icon clrVerticalNavIcon shape="deploy"></clr-icon>
          {{'nav.deploy' | translate}}
        </a>

        <!-- comment later -->
        <a clrVerticalNavLink *concordCanView="[personas.SystemsAdmin, personas.ConsortiumAdmin]"
          clrVerticalNavLink [routerLink]="[routePaths.zones]" routerLinkActive="active" id="zones">
          <clr-icon clrVerticalNavIcon shape="rack-server"></clr-icon>
          {{'nav.zones' | translate}}
        </a>

        <div class="nav-divider"></div>
      </ng-container>
      <label class="nav-header">
        {{ 'nav.consortium' | translate }}
      </label>
      <div name="consortiums-select-wrapper" class="consortiums-select-wrapper">
        <select clrSelect name="consortiums" [(ngModel)]="selectedConsortium" class="consortium-select"
          (change)="consortiumChange()">
          <option *ngFor="let consortium of blockchains" [value]="consortium.id">
            {{ consortium.consortium_name }}
          </option>
        </select>
      </div>
      <ng-container>
        <div class="nav-overlay-container" [ngClass]="{'sidemanu-disable':!selectedConsortium}">
          <a clrVerticalNavLink [routerLink]="['dashboard']" routerLinkActive="active">
            <clr-icon clrVerticalNavIcon shape="home"></clr-icon>
            {{'nav.dashboard' | translate}}
          </a>
          <a clrVerticalNavLink [routerLink]="['nodes']" links="['nodes']" routerLinkActive="active">
            <clr-icon clrVerticalNavIcon shape="cluster"></clr-icon>
            {{'nav.nodeList' | translate}}
          </a>

          <a clrVerticalNavLink [routerLink]="['organizations']" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
            <clr-icon clrVerticalNavIcon shape="organization"></clr-icon>
            {{'nav.organizations' | translate}}
          </a>
          <a clrVerticalNavLink *ngIf="blockchainType !== 'DAML'" [routerLink]="['smart-contracts']"
            routerLinkActive="active" id="smartContracts">
            <clr-icon clrVerticalNavIcon shape="scroll"></clr-icon>
            {{'nav.smartContracts' | translate}}
          </a>
          <a clrVerticalNavLink *ngIf="blockchainType !== 'DAML'" [routerLink]="['blocks']" routerLinkActive="active">
            <clr-icon clrVerticalNavIcon shape="blocks-group"></clr-icon>
            {{'nav.blockList' | translate}}
          </a>
          <div class="nav-divider"></div>
          <label class="nav-header">
            {{'nav.developer.header' | translate}}
          </label>
          <!-- To be used once docs are in production -->
          <!-- <a clrVerticalNavLink (click)="onClickToHelp()">
            <clr-icon clrVerticalNavIcon shape="book"></clr-icon>
            {{'nav.developer.docs' | translate}}
          </a> -->
          <!-- Logging NAV -->
          <ng-container *ngIf="!isOnPrem">
            <a clrVerticalNavLink [routerLink]="['logging']" routerLinkActive="active" id="logging"
              *concordFeatureFlag="'developer_logging'">
              <clr-icon clrVerticalNavIcon shape="file-group"></clr-icon>
              {{'nav.developer.logs' | translate}}
            </a>
          </ng-container>
          <a clrVerticalNavLink [routerLink]="['developer/apis']" routerLinkActive="active" id="apis">
            <clr-icon clrVerticalNavIcon shape="info-circle"></clr-icon>
            {{'nav.developer.api' | translate}}
          </a>
          <a clrVerticalNavLink [routerLink]="['developer/examples']" routerLinkActive="active">
            <clr-icon clrVerticalNavIcon shape="tools"></clr-icon>
            {{'nav.developer.samples' | translate}}
          </a>
          <ng-container>
            <!-- TODO - ADD TO FEATURE FLAG - UNDER DEVELOPMENT -->
              <!-- <ng-container *ngIf="!env.csp"> -->
            <!-- <ng-container *concordCanView="[personas.SystemsAdmin, personas.ConsortiumAdmin, personas.OrgAdmin]">
              <div class="nav-divider"></div>
              <label class="nav-header">
                {{'nav.sysadmin.header' | translate}}
              </label>

              consortiums
              <a clrVerticalNavLink [routerLink]="['system/consortiums']" routerLinkActive="active"
                *concordCanView="[personas.SystemsAdmin, personas.ConsortiumAdmin, personas.OrgAdmin]">
                <clr-icon clrVerticalNavIcon shape="network-globe"></clr-icon>
                {{'nav.sysadmin.consortiums' | translate}}
              </a>

              active tasks
              <a clrVerticalNavLink [routerLink]="['system/tasks']" routerLinkActive="active"
                *concordCanView="[personas.SystemsAdmin, personas.ConsortiumAdmin, personas.OrgAdmin]">
                <clr-icon clrVerticalNavIcon shape="tasks"></clr-icon>
                {{'nav.sysadmin.tasks' | translate}}
              </a>

              features
              <a clrVerticalNavLink [routerLink]="['system/features']" routerLinkActive="active"
                *concordCanView="[personas.SystemsAdmin, personas.ConsortiumAdmin, personas.OrgAdmin]">
                <clr-icon clrVerticalNavIcon shape="list"></clr-icon>
                {{'nav.sysadmin.features' | translate}}
              </a>

              roles
              <a clrVerticalNavLink [routerLink]="['system/roles']" routerLinkActive="active"
                *concordCanView="[personas.SystemsAdmin, personas.ConsortiumAdmin, personas.OrgAdmin]"
                tourAnchor="onboardingTour.userManagement">
                <clr-icon clrVerticalNavIcon shape="users"></clr-icon>
                {{'nav.sysadmin.roles' | translate}}
              </a>

              environment
              <a clrVerticalNavLink [routerLink]="['system/environment']" routerLinkActive="active"
                *concordCanView="[personas.SystemsAdmin, personas.ConsortiumAdmin, personas.OrgAdmin]">
                <clr-icon clrVerticalNavIcon shape="network-settings"></clr-icon>
                {{'nav.sysadmin.env' | translate}}
              </a>
            </ng-container> -->
          </ng-container>
        </div>
      </ng-container>
      <div class="sidemenu-bottom-buttons">
        <concord-theme-switch-button class="bottom-button theme-switch-button" simple-button="true">
        </concord-theme-switch-button>
      </div>
    </clr-vertical-nav>
    <concord-task-panel class="panel-7"></concord-task-panel>

  </div>
</clr-main-container>
<clr-modal #welcomeModal [(clrModalOpen)]="welcomeModalOpened">
  <concord-welcome-content #welcomeContentComponent class="modal-body"></concord-welcome-content>
</clr-modal>

