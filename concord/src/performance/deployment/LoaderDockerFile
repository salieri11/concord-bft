FROM concord-core:latest
WORKDIR /
RUN mkdir -p perf_loader
RUN mkdir -p /perf_loader/config
RUN mkdir -p /perf_loader/cores
RUN mkdir -p /concord/log
RUN cp /concord/perf_test_tool /perf_loader
RUN sysctl kernel.core_pattern=/perf_loader/cores/core.%e.%h.%s.%t >/dev/null
RUN ulimit -c unlimited
VOLUME [ "/perf_loader/config", "/perf_loader/cores" ]
ENTRYPOINT []
CMD ["/perf_loader/perf_test_tool"]
